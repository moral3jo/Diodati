# Project Sandbox MVP

**Motor de simulaci√≥n emergente impulsado por IAs.**

Project Sandbox es un **motor de simulaci√≥n agn√≥stico** donde agentes (IAs o Humanos) interact√∫an en un entorno virtual persistente.
La filosof√≠a central es **"C√≥digo Tonto, √Årbitro Inteligente"**: el c√≥digo solo gestiona el movimiento de datos, mientras que un Gran Modelo de Lenguaje (LLM) act√∫a como "Motor F√≠sico" y Juez, decidiendo las consecuencias de cada acci√≥n.

---

## üöÄ C√≥mo Empezar

### Requisitos
- Python 3.11+
- Una API Key de **Groq** (para Llama 3) o **Google Gemini**.

### Instalaci√≥n

1.  **Clonar y preparar entorno:**
    ```bash
    git clone https://github.com/TU_USUARIO/TU_REPO.git
    cd IAS
    python -m venv venv
    .\venv\Scripts\activate  # Windows
    # source venv/bin/activate # Linux/Mac
    pip install -r requirements.txt
    ```

2.  **Configurar Variables:**
    Copia el ejemplo y ed√≠talo con tus claves:
    ```bash
    cp .env.example .env
    ```
    Edita `.env` y a√±ade tu `GROQ_API_KEY`.

3.  **Ejecutar Simulaci√≥n:**
    ```bash
    python main.py
    ```

---

## üß† Arquitectura Multi-Modelo

Este proyecto no usa una sola IA. Usa un **enjambre de modelos especializados** para optimizar costes y latencia (ver `app/ai_config.py`).

| Rol | Funci√≥n | Modelo Recomendado (Tier 1) | Motivo |
|---|---|---|---|
| **Cerebro (Reasoning)** | √Årbitro. Decide qu√© pasa y resuelve conflictos. | `groq/llama-3.3-70b-versatile` | Necesita m√°xima l√≥gica e inteligencia. 1k req/d√≠a. |
| **Secretario (Formatting)** | Traduce la narrativa a JSON estricto. | `groq/llama-3.1-8b-instant` | Necesita obediencia ciega a esquemas. 14k req/d√≠a. |
| **Actores (NPCs)** | Roleplay de los personajes (Juan, Pedro). | `groq/llama-3.1-8b-instant` | Velocidad y creatividad. |

> **Nota:** El sistema soporta fallback y cambio "en caliente" editando `app/ai_config.py`.

---

## ‚öôÔ∏è Estructura del Proyecto

- **`main.py`**: Punto de entrada. Carga configuraci√≥n e inicia el bucle.
- **`app/engine.py`**: El coraz√≥n. Gestiona el bucle de eventos (Percibir -> Actuar -> Arbitrar -> Guardar).
- **`app/arbitrator.py`**: La l√≥gica del √Årbitro. Contiene los Prompts del Sistema y el flujo de 2 pasos (Think -> Format).
- **`app/ai_config.py`**: Matriz de asignaci√≥n de modelos por rol.
- **`app/drivers.py`**: Adaptadores para los agentes (Mock, Scripted, API, Humano).
- **`world_init.json`**: Configuraci√≥n inicial del mundo (habitaciones, items, agentes).

---

## üõ†Ô∏è Stack Tecnol√≥gico

| Componente | Tecnolog√≠a |
|---|---|
| Lenguaje | **Python 3.14** (Asyncio Nativo) |
| Gesti√≥n IAs | **LiteLLM** (Abstracci√≥n universal de APIs) |
| IA Principal | **Groq LPU** (Inferencia ultra-r√°pida) |
| Base de Datos | **SQLite** + JSON Logs (Persistencia total) |
| Configuraci√≥n | **Dotenv** + JSON |

---

## üîÆ Roadmap & TODOs

### Pr√≥ximos Pasos (Core Engine)
- [ ] **Sistema de Iniciativa:** Turnos basados en velocidad, no round-robin fijo.
- [ ] **Propagaci√≥n del Sonido:** Que "gritar" en una sala alerte a las adyacentes.
- [ ] **Tier List Autom√°tica:** Sistema de fallback. Si Llama-70b falla, saltar a Qwen-32b autom√°ticamente.

### Tier List de Modelos (Referencia)

**Cerebro (High Logic)**
1. `groq/llama-3.3-70b-versatile`
2. `groq/qwen/qwen3-32b`
3. `groq/meta-llama/llama-4-maverick-17b-instruct` (Experimental)

**Secretario / Actores (High Speed)**
1. `groq/llama-3.1-8b-instant`
2. `groq/meta-llama/llama-4-scout-17b-instruct`
3. `groq/moonshotai/kimi-k2-instruct`

---
*Documento de Dise√±o T√©cnico v2.1*